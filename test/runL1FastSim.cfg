process PROD  = 
{


   #The module which reade from a HepMC ASCII file
#   source = MCFileSource
#   {
#      # The HepMC test File
#      untracked vstring fileNames = {"SherpaWriteHepMC.dat"}
#      untracked int32 maxEvents = 10
#   }
                 
	service =  RandomNumberGeneratorService {
		untracked uint32 sourceSeed = 12349
	# This is to initialize the random engine of Famos
# Watch out! This works only if the FamosProducer label is "Famos"
                PSet moduleSeeds =
                  {
                     untracked uint32 VtxSmeared = 123456789
                     untracked uint32 famosSimHits = 12279
                     untracked uint32 siTrackerGaussianSmearingRecHits = 24680
		     untracked uint32 RecHits = 745635
		     untracked uint32 mix = 12345 
                  }
	}

        source = PythiaSource {
                  
                          
         untracked int32 maxEvents = 100
    PSet PythiaParameters = {

# This is a vector of ParameterSet names to be read, in this order
# The first two are in the include files below
# The last one are simply my additional parameters
        vstring parameterSets = {
#       "pythiaMinBias", 
        "myParameters"
        }
#
# Default cards for minimum bias events (unfiltered)
# Name of the set is "pythiaMinBias"
#include "IOMC/GeneratorInterface/test/pythiaMinBias.cfg"
#
# User cards - name is "myParameters"
# Pythia's random generator initialization 
        vstring myParameters = {
        'MSEL=0 ! Users defined processes',
        'MSUB(102)=1 ! Define the process : gg -> H',
        'PMAS(23,1)=91.188 ! Z mass',
        'PMAS(24,1)=80.450 ! W mass',
        'PMAS(25,1)=180.00 ! H mass',
        'MDME(210,1)=0 ! Switch off Higgs decay channels',
        'MDME(211,1)=0',
        'MDME(212,1)=0',
        'MDME(213,1)=0',
        'MDME(214,1)=0',
        'MDME(215,1)=0',
        'MDME(216,1)=0',
        'MDME(217,1)=0',
        'MDME(218,1)=0',
        'MDME(219,1)=0',
        'MDME(220,1)=0',
        'MDME(221,1)=0',
        'MDME(222,1)=0',
        'MDME(223,1)=0',
        'MDME(224,1)=0',
        'MDME(225,1)=1 ! H -> ZZ switched on',
        'MDME(226,1)=0',
        'MDME(174,1)=0 ! Switch off Z decay channels',
        'MDME(175,1)=0',
        'MDME(176,1)=0',
        'MDME(177,1)=0',
        'MDME(178,1)=0',
        'MDME(179,1)=0',
        'MDME(180,1)=0',
        'MDME(181,1)=0',
        'MDME(182,1)=1 ! Z -> e+e- switched on',
        'MDME(183,1)=0',
        'MDME(184,1)=1 ! Z -> mu+mu- switched on',
        'MDME(185,1)=0',
        'MDME(186,1)=0',
        'MDME(187,1)=0',
        'MSTJ(22)=2   ! Do not decay unstable particles',
        'PARJ(71)=10. ! with c*tau > cTauMin (in mm) in PYTHIA' 
        }

    }
}       



##include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"


   # The particle data table
##   include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

   #Tracker geometry
   es_module = TrackerGeometricDetESModule {}
   include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
   include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

   #Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"			
  include "SimGeneral/MixingModule/data/mixNoPU.cfi"

   module o1 = PoolOutputModule { untracked string fileName = "Jets.root" }

 # Famos SimHits 
   include "FastSimulation/EventProducer/data/FamosSimHits.cfi"
   replace famosSimHits.SimulateCalorimetry = true
   replace famosSimHits.SimulateTracking = true
   replace famosSimHits.SimulatePileUp = false


  module RecHits = CaloRecHitsProducer
   {
	include "FastSimulation/CaloRecHitsProducer/data/RecHitsFactory.cfi"
    }


include "FastSimulation/L1CaloTriggerProducer/data/fastl1calosim.cfi"

replace fastL1CaloSim.EmInputs =
	 { "RecHits:EcalRecHitsEB", "RecHits:EcalRecHitsEE"  }	
 



include "Configuration/JetMET/data/calorimetry-jetmet.cff"	

replace towerMaker.ecalInputs = { "RecHits:EcalRecHitsEB", "RecHits:EcalRecHitsEE" }
replace towerMaker.hbheInput = RecHits
replace towerMaker.hoInput = RecHits
replace towerMaker.hfInput = RecHits

service = Timing { }
service = SimpleProfiling { }

path p1 = { famosSimHits,mix,RecHits,towerMaker,fastL1CaloSim  }

endpath outpath = { o1 }

# To get rid of the CaloNumbering messages 
# Keep the logging output to a nice level #
include "FWCore/MessageService/data/MessageLogger.cfi"
replace MessageLogger.destinations = {"detailedInfo.txt"}
}
